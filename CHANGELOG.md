# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.2.0] - 2024-11-30

### Added

#### Улучшения API
- **Pythonic API для TaskRegistry** — добавлена поддержка операторов `in` и `[]`, а также свойства `tasks` для более удобной работы с реестром задач
- **Обработка ошибок в ParameterizedIterableTask** — добавлены стратегии обработки ошибок (`stop`, `continue`, `retry`) и кастомный callback `on_error` для гибкой обработки ошибок при обработке параметров
- **Улучшенные параметры конструкторов адаптеров** — добавлены параметры `database_name` и `table_name` в `MySQLProgressTracker`, автоматическое извлечение `database_name` из connection string в `MongoDBProgressTracker`

#### Документация
- Добавлен раздел "Quick Start" в README
- Добавлен раздел "API Reference" с детальным описанием всех компонентов
- Добавлен раздел "Database Adapters" с примерами использования всех адаптеров
- Добавлен раздел "Troubleshooting" с типичными проблемами и решениями
- Улучшены docstrings для всех публичных API с практическими примерами
- Добавлены новые примеры: `adapters_usage.py` и `custom_tracker.py`

### Fixed

- **Критическое исправление**: Исправлена проблема с отсутствием подпакета `adapters` в PyPI пакете (Issue #010)
- Исправлены предупреждения SQLAlchemy 2.0 для `declarative_base` в MySQL и PostgreSQL адаптерах

### Changed

- Улучшена документация параметров конструкторов всех адаптеров
- Обновлены примеры использования с учетом новых возможностей API

## [0.1.0] - 2024-11-29

### Added

#### Основной функционал
- **TaskOrchestrator** — основной класс для управления выполнением задач
- **TaskRegistry** — реестр задач с проверкой уникальности имен
- **DependencyValidator** — валидатор зависимостей между задачами
- **ExecutionResult** — результат выполнения последовательности задач

#### Интерфейсы
- **Task** — абстрактный базовый класс для задач
- **IterableTask** — абстрактный класс для итеративных задач
- **ProgressTracker** — абстрактный класс для отслеживания прогресса
- **TaskResult** — результат выполнения задачи
- **ExecutionContext** — контекст выполнения задачи

#### Модели данных
- **TaskProgress** — модель прогресса выполнения задачи
- **TaskStatus** — статусы задач (PENDING, IN_PROGRESS, COMPLETED, FAILED, CANCELLED)

#### Итераторы
- **ResumeIterator** — итератор для восстановления с места остановки
- **LimitingIterator** — итератор для ограничения количества элементов

#### Адаптеры прогресса
- **MemoryProgressTracker** — трекер прогресса в памяти (встроенный)
- **MySQLProgressTracker** — трекер прогресса для MySQL (опционально)
- **MongoDBProgressTracker** — трекер прогресса для MongoDB (опционально)
- **PostgreSQLProgressTracker** — трекер прогресса для PostgreSQL (опционально)

#### Исключения
- **TaskOrchestratorError** — базовое исключение компонента
- **DependencyError** — ошибка валидации зависимостей
- **TaskExecutionError** — ошибка выполнения задачи
- **ProgressError** — ошибка работы с прогрессом

#### Документация и примеры
- README с описанием проекта и примерами
- 3 примера использования в папке `examples/`
- Полная документация API с docstrings
- Диаграммы архитектуры в формате Mermaid

#### Тестирование
- Unit-тесты для всех компонентов (покрытие >= 90%)
- Интеграционные тесты для основных сценариев
- Тесты производительности (AC-6.1, AC-6.2, AC-6.3)
- Mock-тесты для адаптеров БД

### Features

- Управление порядком выполнения задач с зависимостями
- Валидация зависимостей (циклические зависимости, порядок выполнения)
- Отслеживание прогресса выполнения задач
- Восстановление с места остановки для итеративных задач
- Поддержка различных хранилищ прогресса (Memory, MySQL, MongoDB, PostgreSQL)
- Обработка ошибок с прерыванием выполнения
- Распространение контекста выполнения между задачами

### Performance

- Валидация зависимостей для 100 задач выполняется менее чем за 1 секунду
- Сохранение прогресса не блокирует выполнение более чем на 10ms
- Компонент успешно обрабатывает последовательности из 50+ задач

### Documentation

- Все публичные API имеют docstrings в формате Google
- README с инструкциями по установке и использованию
- Примеры использования для основных сценариев
- CHANGELOG с историей изменений

## [Unreleased]

### Planned

- Поддержка параллельного выполнения задач
- Веб-интерфейс для мониторинга
- Расширенные метрики производительности

---

[0.1.0]: https://github.com/seligoroff/task_sequencer/releases/tag/v0.1.0

